<!DOCTYPE html>
<html>
<head>
    <title>GPS tracking</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        body { 
            font-family: kigelia, sans-serif; 
            margin: 0; 
            padding: 20px; 
            background-color: #f3f6f4; 
        }
        .grid { 
            display: grid; 
            grid-template-columns: repeat(2, 1fr); 
            gap: 20px; 
            max-width: 1200px; 
            margin: 0 auto; 
        }

        .card { 
            background: white; 
            border-radius: 15px; 
            padding: 25px; 
            box-shadow: 0 4px 8px rgba(0,0,0,0.5); 
            display: flex; 
            align-items: center; 
            text-align: left; 
        }
        
        button.mic {
            margin-top: 15px;
            align-self: flex-start;
            padding: 15px 30px;
            font-size: 16px;
            background-color: #caa63d; 
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.2s, transform 0.2s;
        }
        button.mic:hover {
            background-color: #795f13;
            transform: scale(1.1);
        }
        
        button.map{
            margin-top: 7px;
            align-self: flex-start;
            padding: 10px 30px;
            font-size: 16px;
            background-color: #388e3c; 
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.2s, transform 0.2s;
        }
        button.map:hover {
            background-color: #1b5e20;
            transform: scale(1.1);
        }

        .iconp { 
            font-size: 100px; 
            margin-right: 25px; 
            min-width: 50px; 
            text-align: center; 
        }
        
        .iconm {
            font-size: 60px;
            color: #404040;
            margin-right: 25px;
            min-width: 50px;
            text-align: center;
        }

        .content { 
            display: flex; 
            flex-direction: column; 
        }

        .label { 
            font-size: 20; 
            color: #7f8c8d; 
            margin-bottom: 5px; 
            font-weight: bold; 
        }
        
        .dlabel {
            font-size: 20;
            color: #7f8c8d;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .value { 
            font-size: 25px; 
            color: #2c3e50; 
            display: flex; 
            align-items: baseline; 
            font-weight: bold;
        }
        
        .dvalue {
            font-size: 25px; 
            color: #2c3e50; 
            display: flex; 
            align-items: baseline; 
        }
        
        .unit { 
            font-size: 16px; 
            color: #95a5a6; 
            margin-left: 5px; 
        }

        h1 { 
            text-align: center; 
            font-family: courier; 
            margin: 30px 0; 
            color: #484848; 
        }

    </style>

    <script>
      function updateData() {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
              var data = JSON.parse(this.responseText);
              document.getElementById('lat1').textContent = data.lat;
              document.getElementById('lng1').textContent = data.lng;
              // Person2, Person3 placeholders
              document.getElementById('lat2').textContent = "-";
              document.getElementById('lng2').textContent = "-";
              document.getElementById('lat3').textContent = "-";
              document.getElementById('lng3').textContent = "-";
            }
        };
        xhttp.open("GET", "/data", true);
        xhttp.send();
      }
      setInterval(updateData, 2000);
      window.onload = updateData;
      
      function openGoogleMaps(latId, lngId) {
      var lat = document.getElementById(latId).textContent.trim();
      var lng = document.getElementById(lngId).textContent.trim();
      if(lat === "-" || lng === "-") {
      alert("location coords unnavailable...");
      return;
      }
      var url = `https://www.google.com/maps?q=${encodeURIComponent(lat)},${encodeURIComponent(lng)}`;
        window.open(url, '_blank');
      }
      
    </script>

</head>

<body>
    <h1>GPS tracking</h1>
    <div class="grid">

        <div class="card">
            <i class="fa-solid fa-user iconp" style="color: #6fa8dc;"></i>
            <div class="content">
                <div class="value" title="additional info here";>Person1:</div>
                <div class="dlable" title="additional info here";>phone number:</div>
                <button class="mic" type="button" onclick="alert('open Microphone for Person 1')" title="open microphone">Microphone</button>
           </div>        
        </div>
        <div class="card">
            <i class="fa-solid fa-map-location-dot iconm" style="color: #073763;"></i>
            <div class="content">
                <div class="label">Latitude</div>
                <div class="dvalue" id="lat1">%LAT%</div>
                <div class="label">Longitude</div>
                <div class="dvalue" id="lng1">%LNG%</div>
                <button class="map" type="button" onclick="openGoogleMaps('lat1', 'lng1')" title="open Google Maps">View on Map</button>
            </div>
        </div>
        
        <div class="card">
            <i class="fa-solid fa-user iconp" style="color:#93c47d;"></i>
             <div class="content">
                <div class="value" title="additional info here";>Person2:</div>
                <div class="dlable" title="additional info here";>phone number:</div>
                <button class="mic" type="button" onclick="alert('open Microphone for Person 2')" title="open microphone">Microphone</button>
           </div>        
        </div>
        <div class="card">
            <i class="fa-solid fa-map-location-dot iconm" style="color: #274e13;"></i>
            <div class="content">
                <div class="label">Latitude</div>
                <div class="value" id="lat2">-</div>
                <div class="label">Longitude</div>
                <div class="value" id="lng2">-</div>
                <button class="map" type="button" onclick="openGoogleMaps('lat1', 'lng1')" title="open Google Maps">View on Map</button>
            </div>
        </div>

        <div class="card">
            <i class="fa-solid fa-user iconp" style="color:#e06666;"></i>
            <div class="content">
                <div class="value" title="additional info here";>Person3:</div>
                <div class="dlable" title="additional info here";>phone number:</div>
                <button class="mic" type="button" onclick="alert('open Microphone for Person 3')" title="open microphone">Microphone</button>
           </div>        
        </div>
        <div class="card">
            <i class="fa-solid fa-map-location-dot iconm" style="color: #660000;"></i>
            <div class="content">
                <div class="label">Latitude</div>
                <div class="value" id="lat3">-</div>
                <div class="label">Longitude</div>
                <div class="value" id="lng3">-</div>
                <button class="map" type="button" onclick="openGoogleMaps('lat1', 'lng1')" title="open Google Maps">View on Map</button>
            </div>
        </div>
    </div>
</body>
</html>
